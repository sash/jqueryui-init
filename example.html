<!DOCTYPE HTML> 
<html> 
<head> 
	<title>jQueryUI Init Example</title> 
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script> 
	 
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script> 
	<script src="jqueryui-init.js"></script> 
	<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/smoothness/jquery-ui.css" type="text/css" /> 
	<script>
		// Register custom widgets. You probably want to do this in a separate js file
		$.widget('ui.warning', {
			_init: function(){
				this.element
					.prepend('<span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>')
					.wrap('<div class="ui-widget"></div>')
					.wrap('<div class="ui-state-error ui-corner-all"></div>')
			}
		})
		$.widget('ui.info', {
			_init: function(){
				this.element
					.prepend('<span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>')
					.wrap('<div class="ui-widget"></div>')
					.wrap('<div class="ui-state-highlight ui-corner-all"></div>')
			}
		})
		$.uiinit('warning').uiinit('info');
		
		// Using the uidestroy event you can implement a cleanup when loading new html via ajax
		// You could do something like this:
		/*
		(function(){
			var old_html = $.fn.html;
			$.fn.html = function (content){
				if (typeof content == 'undefined') return old_html.apply(this, arguments)
				else{
					this.trigger('uidestroy', 'inner')
					return old_html.apply(this, arguments).trigger('uiinit', 'inner')
				}
			}
		})()
		*/
	
		
		
		$(function(){
			// When loading html with ajax trigger ui-update on the changed element, to initialize the components
			$.get('example_load.html', function(loaded){
				$('#ajax-loaded').html(loaded).trigger('uiinit')
			})
			// If you want to deinitialize the components (initialized in the previous example) you can trigger uidestroy
			$('#unload-datepicker').click(function(e){
				e.preventDefault();
				$('#datepicker-container').trigger('uidestroy')
			})
			
		})
	</script>
</head>
<body> 
	<h1>Widget examples: </h1>
	<p data-ui-warning>Test</p> 
	<p data-ui-info>Best</p> 
	 
	<p data-ui-buttonset><a href="#" data-ui-button data-ui-button-icons-primary="ui-icon-check">test 1</a><a href="#">test 2</a></p> 
	<div data-ui-tabs> 
		<ul> 
			<li><a href="#tab1">tab1</a></li> 
			<li><a href="#tab2">tab2</a></li> 
			<li><a href="#tab3">tab3</a></li> 
		</ul> 
		<div id="tab1">t1</div> 
		<div id="tab2">t2</div> 
		<div id="tab3">t3</div> 
	</div>
	
	<div id="ajax-loaded"></div>
	<div id="datepicker-container">
		<p>Select date</p>
		<input data-ui-datepicker id="datepicker" name="date" type="text"/>
	</div>
	
	<a href="#" id="unload-datepicker">unload datepicker</a>
</body>  
</html>

